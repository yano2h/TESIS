<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <ui:composition template="#{pages.layout_atencion}">
        <ui:define name="title">
            <h:outputText value="Crear Proyecto"/>
        </ui:define>
        <ui:define name="content">
            <h:form id="form_crear_proyecto">
                <p:panel id="pnl_crear_proyecto" header="Crear Nuevo Proyecto">
                    <h:panelGrid id="grid_crear_proyecto" columns="4">
                        <p:outputLabel value="Codigo Interno:" for="itxt_codigo_interno" styleClass="label_blod"/>
                        <p:inputText id="itxt_codigo_interno" value="#{mbProyecto.nuevoProyecto.codigoInterno}" required="true" maxlength="6" size="6"/>

                        <p:outputLabel value="Nuevo Proyecto:" for="itxt_nombre_proyecto" styleClass="label_blod" style="margin-left: 25px;"/>
                        <p:inputText id="itxt_nombre_proyecto" value="#{mbProyecto.nuevoProyecto.nombre}" required="true" maxlength="45" size="45"/>
                    </h:panelGrid>
                    <h:panelGrid columns="2" style="margin-top: 5px;">
                        <p:outputLabel value="Tipo Proyecto:" for="slct_tipo_proyecto" styleClass="label_blod"/>
                        <p:selectOneMenu id="slct_tipo_proyecto" value="#{mbProyecto.nuevoProyecto.tipoProyecto}" required="true" style="min-width: 200px;margin-left: 5px;">
                            <f:selectItem itemValue="" itemLabel="Seleccione un tipo Proyecto"/>
                            <f:selectItems value="#{tipoProyectoController.itemsAvailableSelectMany}"/>
                        </p:selectOneMenu>
                    </h:panelGrid>
                    <br/>
                    <h:panelGrid>
                        <p:outputLabel value="DescripciÃ³n:" for="itxta_descripcion" styleClass="label_blod"/>
                        <p:inputTextarea id="itxta_descripcion" value="#{mbProyecto.nuevoProyecto.descripcion}" maxlength="255" rows="3" cols="76"/>
                    </h:panelGrid>
                    
                    <p:separator style="height: 1px;margin-top: 10px;margin-bottom: 10px;"/>
                    
                    <h:panelGrid columns="2">
                        <p:outputLabel value="Jefe de Proyecto:" for="slct_jefe_proyecto" styleClass="label_blod"/>
                        <p:selectOneMenu id="slct_jefe_proyecto" value="#{mbProyecto.jefeProyecto}" required="true">
                            <f:selectItem itemLabel="Seleccione un Jefe de Proyecto"/>
                            <f:selectItems value="#{mbProyecto.itemsAvailableSelectManyNombreCompleto}"/>
                        </p:selectOneMenu>
                    </h:panelGrid>
                    
                    <h:outputText value="Otroa Participantes" styleClass="label label_blod"/>
                    
                    <h:panelGrid id="grid_participante" columns="3" >
                        <p:selectOneMenu id="slct_participante" value="#{mbProyecto.nuevoParticipanteProyecto.participante}">
                            <f:selectItems value="#{mbProyecto.itemsAvailableSelectManyNombreCompleto}"/>
                        </p:selectOneMenu>
                        
                        <p:selectOneMenu id="slct_rol" value="#{mbProyecto.nuevoParticipanteProyecto.rol}">
                            <f:selectItems value="#{rolProyectoController.itemsAvailableSelectMany}"/>
                        </p:selectOneMenu>
                        <p:commandButton value="Agregar" actionListener="#{mbProyecto.agregarParticipante}" update="table_participantes grid_participante" process="grid_participante"/>
                    </h:panelGrid>
                    
                    <p:dataTable id="table_participantes" 
                                 var="participante"
                                 value="#{mbProyecto.participantes}"
                                 rows="20" 
                                 emptyMessage="Ninguna participante"
                                 selectionMode="single"
                                 selection="#{mbProyecto.participanteSelected}"
                                 rowKey="#{participante.participanteProyectoPK}">
                        
                        <p:column headerText="Nombre Participante">
                            <h:outputText value="#{participante.participante.nombre} #{participante.participante.apellidoPaterno} #{participante.participante.apellidoMaterno}" />
                        </p:column>
                        <p:column headerText="Rol">
                            <h:outputText value="#{participante.rol.nombreRol}"/>
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </ui:define>
    </ui:composition>
</html>