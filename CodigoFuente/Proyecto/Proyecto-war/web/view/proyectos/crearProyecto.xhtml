<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <ui:composition template="#{pages.layout_atencion}">
        <ui:define name="title">
            <h:outputText value="Crear Proyecto"/>
        </ui:define>
        <ui:define name="content">
            <h:outputScript library="js" name="calendar-localization.js" />

            <h:form id="form_crear_proyecto">
                <p:panel id="pnl_crear_proyecto" header="Crear Nuevo Proyecto">
                    <h:panelGrid id="grid_crear_proyecto" columns="4">
                        <p:outputLabel value="Codigo Interno:" for="itxt_codigo_interno" styleClass="label_blod"/>
                        <p:inputText id="itxt_codigo_interno" value="#{mbProyecto.nuevoProyecto.codigoInterno}" required="true" maxlength="6" size="6"/>

                        <p:outputLabel value="Nombre Proyecto:" for="itxt_nombre_proyecto" styleClass="label_blod" style="margin-left: 25px;"/>
                        <p:inputText id="itxt_nombre_proyecto" value="#{mbProyecto.nuevoProyecto.nombre}" required="true" maxlength="45" size="45"/>
                    </h:panelGrid>
                    <h:panelGrid columns="2" style="margin-top: 5px;line-height: 1.4em;">
                        <p:outputLabel value="Tipo Proyecto:" for="slct_tipo_proyecto" styleClass="label_blod"/>
                        <p:selectOneMenu id="slct_tipo_proyecto" value="#{mbProyecto.nuevoProyecto.tipoProyecto}" required="true" style="min-width: 250px;margin-left: 5px;">
                            <f:selectItem itemValue="" itemLabel="Seleccione un tipo Proyecto"/>
                            <f:selectItems value="#{tipoProyectoController.itemsAvailableSelectMany}"/>
                        </p:selectOneMenu>

                        <p:outputLabel value="Estado Proyecto:" for="slct_estado_proyecto" styleClass="label_blod"/>
                        <p:selectOneMenu id="slct_estado_proyecto" value="#{mbProyecto.nuevoProyecto.estadoProyecto}" required="true" style="min-width: 250px;margin-left: 5px;">
                            <f:selectItem itemValue="" itemLabel="Seleccione un Estado Proyecto"/>
                            <f:selectItems value="#{estadoProyectoController.itemsAvailableSelectMany}"/>
                        </p:selectOneMenu>

                        <p:outputLabel value="Jefe de Proyecto:" for="slct_jefe_proyecto" styleClass="label_blod"/>
                        <p:selectOneMenu id="slct_jefe_proyecto" value="#{mbProyecto.jefeProyecto}" required="true" style="min-width: 250px;margin-left: 5px;">
                            <f:selectItem itemLabel="Seleccione un Jefe de Proyecto"/>
                            <f:selectItems value="#{mbProyecto.itemsAvailableSelectManyNombreCompleto}"/>
                        </p:selectOneMenu>

                        <p:outputLabel value="Fecha de Inicio:" for="cal_fecha_ini" styleClass="label_blod"/>
                        <p:calendar id="cal_fecha_ini" showOn="button" pattern="dd/MM/yyyy" locale="es" navigator="true" required="true" value="#{mbProyecto.nuevoProyecto.fechaInicio}" style="margin-left: 5px;"/>
                    </h:panelGrid>
                    <br/>
                    <h:panelGrid columns="1">
                        <p:outputLabel value="Descripción:" for="itxta_descripcion" styleClass="label_blod"/>
                        <p:inputTextarea id="itxta_descripcion" value="#{mbProyecto.nuevoProyecto.descripcion}" maxlength="255" rows="3" cols="76" required="true"/>
                    </h:panelGrid>
                    <h:panelGrid>
                        <p:commandButton value="Crear" actionListener="#{mbProyecto.crearProyecto}" update="@form" oncomplete="if(!args.validationFailed){dlgExito.show();}"/>
                    </h:panelGrid>
                </p:panel>
                <p:dialog id="dlg_creacion_exitosa" widgetVar="dlgExito" closable="false" resizable="false" modal="true" width="390" header="Creacion Exitosa">
                    <h:panelGrid>
                        <h:outputText value="El proyecto \'#{mbProyecto.nuevoProyecto.nombre}\' fue creado exitosamente. Si desea agregar mas participantes puede hacerlo en el menu de edución"/>
                        <br/>
                        <h:panelGroup style="float: right;">
                            <p:commandButton value="Crear Otro Proyecto" oncomplete="dlgExito.hide();" update="@all" action="crearProyecto"/>
                            <p:commandButton value="Ir al menu de edicion" action="#"/>
                            <p:commandButton value="Salir" action="#"/>
                        </h:panelGroup>
                    </h:panelGrid>
                </p:dialog>
            </h:form>

        </ui:define>
    </ui:composition>
</html>